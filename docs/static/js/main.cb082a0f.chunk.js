(this["webpackJsonplist-tree"]=this["webpackJsonplist-tree"]||[]).push([[0],{137:function(t,e){},138:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n(11),i=n.n(r),c=n(48),o=n(8),s="companies/COMPANIES_REQUEST",u="companies/COMPANIES_SUCCESS",l="companies/COMPANIES_FAILURE",d="housing/HOUSING_REQUEST",p="housing/HOUSING_SUCCESS",j="housing/HOUSING_FAILURE",b="clients/CLIENT_ADD",f="clients/CLIENT_DELETE",O="clients/CLIENT_REQUEST",m="clients/CLIENT_FAILURE",h="options/OPTION_MENU_OPEN",g="options/OPTION_SET_COMPANY",x="options/OPTION_CLIENT_PANEL",y="options/OPTION_SET_FLAT",v={data:[],dataOriginal:[],loading:!1,error:null},N={data:[],loading:!0,error:null},w={loading:!0,error:null},S={menuOpen:!0,curCompany:null,curFlat:null,clientPanel:!1},I=Object(c.b)({housing:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,e=arguments.length>1?arguments[1]:void 0,n=e.type,a=e.payload;switch(n){case d:return Object(o.a)(Object(o.a)({},t),{},{data:[],dataOriginal:[],loading:!0,error:null});case p:return Object(o.a)(Object(o.a)({},t),{},{data:a.data,dataOriginal:a.dataOriginal,loading:!1,error:null});case j:return Object(o.a)(Object(o.a)({},t),{},{data:[],dataOriginal:[],loading:!1,error:a});default:return t}},companies:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,e=arguments.length>1?arguments[1]:void 0,n=e.type,a=e.payload;switch(n){case s:return Object(o.a)(Object(o.a)({},t),{},{data:[],loading:!0,error:null});case u:return Object(o.a)(Object(o.a)({},t),{},{data:a,loading:!1,error:null});case l:return Object(o.a)(Object(o.a)({},t),{},{data:[],loading:!1,error:a});default:return t}},clients:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,e=arguments.length>1?arguments[1]:void 0,n=e.type,a=e.payload;switch(n){case b:case f:return Object(o.a)(Object(o.a)({},t),{},{loading:!1,error:null});case O:return Object(o.a)(Object(o.a)({},t),{},{loading:!0,error:null});case m:return Object(o.a)(Object(o.a)({},t),{},{loading:!1,error:a});default:return t}},options:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,e=arguments.length>1?arguments[1]:void 0,n=e.type,a=e.payload;switch(n){case h:return Object(o.a)(Object(o.a)({},t),{},{menuOpen:a});case g:return Object(o.a)(Object(o.a)({},t),{},{curCompany:a});case x:return Object(o.a)(Object(o.a)({},t),{},{clientPanel:a});case y:return Object(o.a)(Object(o.a)({},t),{},{curFlat:a});default:return t}}}),E=n(80),k=Object(c.c)(I,Object(c.a)(E.a)),C=n(18),_=n(26),L=n.n(_),T=n(49),A=n(50),B=n.n(A),P="https://dispex.org/api/vtest/",R={get:function(){var t=Object(T.a)(L.a.mark((function t(e,n,a){return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",B.a.get(P+e).then((function(t){t&&200===t.status&&n(t)})).catch((function(t){a(t)})));case 1:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),post:function(){var t=Object(T.a)(L.a.mark((function t(e,n,a,r){return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",B.a.post(P+e,n).then((function(t){t&&200===t.status&&a(t)})).catch((function(t){r(t)})));case 1:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}(),put:function(){var t=Object(T.a)(L.a.mark((function t(e,n,a,r){return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",B.a.put(P+e,n).then((function(t){t&&200===t.status&&a(t)})).catch((function(t){r(t)})));case 1:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}(),del:function(){var t=Object(T.a)(L.a.mark((function t(e,n,a){return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",B.a.delete(P+e).then((function(t){t&&200===t.status&&n(t)})).catch((function(t){a(t)})));case 1:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()},H=function(){return function(t){t({type:s}),R.get("Request/companies",(function(e){var n=e.data;t(function(t){return{type:u,payload:t}}(n))}),(function(e){t(function(t){return{type:l,payload:t}}(e))}))}},U=n(183),W=n(184),G=n(185),M=n(181),F=n(87),D=n.n(F),q=n(182),z=n(195),J=function(t){return{type:h,payload:t}},Q=n(177),V=Object(Q.a)((function(t){return{root:{display:"flex",minHeight:"100vh"}}})),Y=320,K=Object(Q.a)((function(t){return{root:Object(o.a)(Object(o.a)({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"space-between",textAlign:"center"})}})),X=Object(Q.a)((function(t){return{title:{fontSize:"1.5rem",margin:0,padding:t.spacing(0,1)},drawer:{width:Y,flexShrink:0},drawerPaper:{width:Y},list:{textAlign:"center"},loader:{margin:t.spacing(3)}}})),Z=n(92),$=n(85),tt=n(86),et=n.n(tt),nt=function(t){return function(e){e({type:d}),R.get("HousingStock?companyId=".concat(t),(function(t){var n=t.data;e(function(t,e){return{type:p,payload:{data:t,dataOriginal:e}}}(function(t){var e,n=[],a=Object($.a)(t);try{for(a.s();!(e=a.n()).done;){var r=e.value,i=r.streetName,c=r.building,o=r.flat,s=r.clients,u=r.addressId,l=r.houseId,d=r.streetId;n=[].concat(Object(Z.a)(n),[{id:d,name:"\u0423\u043b\u0438\u0446\u0430 ".concat(i),parent:0},{id:l,name:"\u0414\u043e\u043c ".concat(c),parent:d},{name:"\u041a\u0432\u0430\u0440\u0442\u0438\u0440\u0430 ".concat(o),parent:l,addressId:u,clients:s}])}}catch(p){a.e(p)}finally{a.f()}return n=Array.from(new Set(n.map(JSON.stringify))).map(JSON.parse),(n=new et.a(n,{key_id:"id",key_parent:"parent"})).GetTree()}(n),n))}),(function(t){e(function(t){return{type:j,payload:t}}(t))}))}},at=n(186),rt=n(4),it=function(t){var e=Object(C.c)((function(t){return t})),n=e.companies.data,r=e.options,i=r.menuOpen,c=r.curCompany,o=Object(C.b)(),s=X();Object(a.useEffect)((function(){o(H())}),[]);var u=function(t){l(),c!==t&&(o(nt(t)),o({type:g,payload:t}))},l=function(){o(J(!1))};return Object(rt.jsxs)(z.a,{className:s.drawer,variant:"persistent",anchor:"left",open:i,classes:{paper:s.drawerPaper},children:[Object(rt.jsxs)("div",{className:K().root,children:[Object(rt.jsx)("h1",{className:s.title,children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0423\u041a"}),Object(rt.jsx)(M.a,{onClick:l,children:Object(rt.jsx)(D.a,{})})]}),Object(rt.jsx)(q.a,{}),Object(rt.jsx)(U.a,{component:"nav",className:"".concat(s.list),"aria-label":"mailbox folders",children:n&&n.length?n.map((function(t){return Object(rt.jsx)(W.a,{button:!0,onClick:function(){return u(t.id)},children:Object(rt.jsx)(G.a,{primary:t.name})},t.id)})):Object(rt.jsx)(at.a,{className:"".concat(s.loader),color:"inherit"})})]})},ct=n(17),ot=n(3),st=Object(Q.a)((function(t){return{content:Object(ct.a)({flexGrow:1,padding:t.spacing(3),transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:-320},t.breakpoints.down("sm"),{padding:t.spacing(2)}),contentShift:{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0},contentWrapper:Object(ct.a)({display:"flex",justifyContent:"space-between",flexWrap:"wrap"},t.breakpoints.down("sm"),{height:"100vh"}),tree:Object(ct.a)({flexGrow:1,flexShrink:0,paddingRight:"16px !important",maxWidth:400},t.breakpoints.down("sm"),{height:"30%",overflow:"auto",maxWidth:"100%",marginBottom:"20px"})}})),ut=n(196),lt=n(189),dt=n(89),pt=n.n(dt),jt=n(90),bt=n.n(jt),ft=n(197),Ot=n(61),mt=Object(Q.a)((function(t){return{root:Object(ct.a)({maxWidth:"calc(100% - ".concat(400,"px)"),minWidth:"280px",minHeight:"calc(100vh - 88px*2)",borderLeft:"1px solid lightgrey",paddingLeft:"16px",flexGrow:1},t.breakpoints.down("sm"),{maxWidth:"100%",borderLeft:0,borderTop:"1px solid lightgrey",paddingLeft:0}),info:{width:"100%",padding:t.spacing(2,0),borderBottom:"1px solid lightgrey"},title:{margin:0},clientsList:{padding:t.spacing(2,0)},paper:{position:"relative",padding:t.spacing(1),paddingRight:40},listItem:{position:"relative",padding:t.spacing(0,1)},key:{flexGrow:0,marginRight:10,"& span":{fontSize:"0.9rem",color:"grey"}},itemDelete:{position:"absolute",right:0,top:0,width:40,height:40,cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center","& *":{color:"grey",cursor:"pointer",fontSize:"2rem"}},form:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:0,flexWrap:"wrap","& *":Object(ct.a)({margin:5,flexGrow:1,maxWidth:320},t.breakpoints.down("sm"),{margin:0,marginRight:5})},btn:Object(ct.a)({maxWidth:"initial"},t.breakpoints.down("sm"),{marginTop:15})}})),ht=n(188),gt=n(139),xt=n(88),yt=n.n(xt),vt={setSameBlockHeight:function(t){vt.runByEvent((function(){var e,n;n=t,e=[].map.call(n,(function(t){return t.children[0]}));for(var a=0,r=0;r<e.length;++r)e[r].removeAttribute("style"),a=Math.max(a,e[r].offsetHeight);for(var i=0;i<e.length;++i)e[i].style.height=a+"px"}),["resize"])},runByEvent:function(t,e){t(),e.map((function(e){window.addEventListener(e,(function(){t()}))}))}},Nt=vt,wt=function(){return{type:O}},St=function(t){return{type:m,payload:t}},It=function(t,e,n){return function(a){a(wt()),R.post("HousingStock/client",t,(function(t){R.put("HousingStock/bind_client",{AddressId:e,ClientId:t.data.id},(function(t){a({type:b}),n()}),(function(t){a(St(t))}))}),(function(t){a(St(t))}))}},Et=function(t,e){return function(n){n(wt()),R.del("HousingStock/bind_client/".concat(t),(function(t){n({type:f}),e()}),(function(t){n(St(t))}))}},kt=n(193),Ct=n(187),_t=function(t){var e=Object(C.c)((function(t){return t})),n=e.housing.dataOriginal,r=e.options,i=r.curFlat,c=r.curCompany,o=Object(a.useRef)(null),s=mt(),u=Object(C.b)(),l=Object(a.useState)(""),d=Object(Ot.a)(l,2),p=d[0],j=d[1],b=Object(a.useState)(""),f=Object(Ot.a)(b,2),O=f[0],m=f[1],h=Object(a.useState)(""),g=Object(Ot.a)(h,2),x=g[0],y=g[1],v=Object(a.useMemo)((function(){return i&&n.length?n.filter((function(t){return i===t.addressId}))[0]:null}),[c,i,n]);return Object(a.useEffect)((function(){o.current&&Nt.setSameBlockHeight(o.current.children)}),[v]),v?Object(rt.jsxs)("div",{className:s.root,children:[Object(rt.jsx)("div",{className:s.info,children:Object(rt.jsx)("h3",{className:s.title,children:"\u0443\u043b. ".concat(v.streetName," ").concat(v.building,", \u043a\u0432. ").concat(v.flat)})}),Object(rt.jsxs)("div",{children:[Object(rt.jsxs)("form",{className:"".concat(s.info," ").concat(s.form),noValidate:!0,autoComplete:"off",children:[Object(rt.jsx)(kt.a,{required:!0,id:"name",label:"name",value:p,onChange:function(t){return j(t.target.value)}}),Object(rt.jsx)(kt.a,{required:!0,id:"phone",label:"phone",value:O,onChange:function(t){return m(t.target.value)}}),Object(rt.jsx)(kt.a,{required:!0,id:"email",label:"email",value:x,onChange:function(t){return y(t.target.value)}}),Object(rt.jsx)(Ct.a,{variant:"outlined",className:s.btn,onClick:function(){return t=v.addressId,void(p&&O&&x&&(u(It({name:p,phone:O,email:x},t,(function(){return u(nt(c))}))),j(""),m(""),y("")));var t},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0436\u0438\u043b\u044c\u0446\u0430"})]}),Object(rt.jsx)(ht.a,{ref:o,className:s.clientsList,container:!0,spacing:3,children:v.clients.map((function(t){return Object(rt.jsx)(ht.a,{item:!0,xs:12,sm:12,md:6,lg:4,xl:3,children:Object(rt.jsxs)(gt.a,{className:s.paper,children:[Object(rt.jsx)("span",{className:s.itemDelete,onClick:function(){return e=t.bindId,void u(Et(e,(function(){return u(nt(c))})));var e},children:Object(rt.jsx)(yt.a,{})}),Object(rt.jsxs)(U.a,{children:[Object(rt.jsxs)(W.a,{className:s.listItem,children:[Object(rt.jsx)(G.a,{primary:"name:",className:s.key}),Object(rt.jsx)(G.a,{primary:t.name,className:s.value})]}),Object(rt.jsxs)(W.a,{className:s.listItem,children:[Object(rt.jsx)(G.a,{primary:"phone:",className:s.key}),Object(rt.jsx)(G.a,{primary:t.phone,className:s.value})]}),Object(rt.jsxs)(W.a,{className:s.listItem,children:[Object(rt.jsx)(G.a,{primary:"e-mail:",className:s.key}),Object(rt.jsx)(G.a,{primary:t.email,className:s.value})]})]})]})},t.id)}))})]})]}):null},Lt=function(t){var e=Object(C.c)((function(t){return t})),n=e.options.menuOpen,a=e.housing,r=a.data,i=a.loading,c=Object(C.b)(),o=st();return Object(rt.jsxs)("main",{className:Object(ot.a)(o.content,Object(ct.a)({},o.contentShift,n)),children:[Object(rt.jsx)("div",{className:K().root}),Object(rt.jsx)(ut.a,{className:o.backdrop,open:i,children:Object(rt.jsx)(at.a,{color:"inherit"})}),Object(rt.jsxs)("div",{className:o.contentWrapper,children:[Object(rt.jsx)(lt.a,{className:o.tree,defaultExpanded:["0"],defaultCollapseIcon:Object(rt.jsx)(pt.a,{}),defaultExpandIcon:Object(rt.jsx)(bt.a,{}),children:r&&r.length>0&&function t(e){return e.map((function(e){return e.child?Object(rt.jsx)(ft.a,{nodeId:e.name+e.id+"_"+e.parent,label:e.name,children:t(e.child)},e.name+e.id+"_"+e.parent):Object(rt.jsx)(ft.a,{nodeId:e.name+e.id+"_"+e.parent,label:e.name,onClick:function(){return c((t=e.addressId,{type:y,payload:t}));var t}},e.name+e.id+"_"+e.parent)}))}(r)}),Object(rt.jsx)(_t,{})]})]})},Tt=n(190),At=n(191),Bt=n(62),Pt=n(91),Rt=n.n(Pt),Ht=Object(Q.a)((function(t){return{appBar:{background:"#343a40",transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(Y,"px)"),marginLeft:Y,transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})},menuButton:{marginRight:t.spacing(2)},hide:{display:"none"}}})),Ut=function(t){var e=Object(C.b)(),n=Object(C.c)((function(t){return t})),r=n.options,i=r.menuOpen,c=r.curCompany,o=n.companies.data,s=Ht(),u=Object(a.useMemo)((function(){var t=o.filter((function(t){return t.id===c}));return(t=t[0])?t.name:"React App"}),[c]);return Object(rt.jsx)(Tt.a,{position:"fixed",className:Object(ot.a)(s.appBar,Object(ct.a)({},s.appBarShift,i)),children:Object(rt.jsxs)(At.a,{children:[Object(rt.jsx)(M.a,{color:"inherit","aria-label":"open drawer",onClick:function(){e(J(!0))},edge:"start",className:Object(ot.a)(s.menuButton,i&&s.hide),children:Object(rt.jsx)(Rt.a,{})}),Object(rt.jsx)(Bt.a,{variant:"h6",noWrap:!0,children:u})]})})},Wt=function(t){var e=V();return Object(rt.jsxs)("div",{className:e.root,children:[Object(rt.jsx)(Ut,{}),Object(rt.jsx)(it,{}),Object(rt.jsx)(Lt,{})]})},Gt=(n(137),n(192));i.a.render(Object(rt.jsxs)(C.a,{store:k,children:[Object(rt.jsx)(Gt.a,{}),Object(rt.jsx)(Wt,{})]}),document.getElementById("root"))}},[[138,1,2]]]);
//# sourceMappingURL=main.cb082a0f.chunk.js.map