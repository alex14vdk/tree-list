{"version":3,"sources":["redux/types.js","redux/reducers/housing.js","redux/reducers/companies.js","redux/reducers/clients.js","redux/reducers/options.js","redux/reduser.js","redux/store.js","utils/service.js","redux/actions/companies.js","redux/actions/options.js","components/App/style.js","components/CompanyPanel/style.js","redux/actions/housing.js","components/CompanyPanel/index.js","components/HousingTreeList/style.js","components/ClientsList/style.js","utils/handlers.js","redux/actions/clients.js","components/ClientsList/index.js","components/HousingTreeList/index.js","components/NavTop/style.js","components/NavTop/index.js","components/App/index.js","index.js"],"names":["COMPANIES_REQUEST","COMPANIES_SUCCESS","COMPANIES_FAILURE","HOUSING_REQUEST","HOUSING_SUCCESS","HOUSING_FAILURE","CLIENT_ADD","CLIENT_DELETE","CLIENT_REQUEST","CLIENT_FAILURE","OPTION_MENU_OPEN","OPTION_SET_COMPANY","OPTION_CLIENT_PANEL","OPTION_SET_FLAT","initialState","data","dataOriginal","loading","error","menuOpen","curCompany","curFlat","clientPanel","combineReducers","housing","state","action","type","payload","companies","clients","options","store","createStore","reducer","applyMiddleware","thunk","config","process","get","extraUrl","callbackSuccess","callbackError","a","axios","then","response","status","catch","err","post","put","del","delete","getCompaniesList","dispatch","Service","companiesLoaded","companiesError","menu","useStyles","makeStyles","theme","root","display","minHeight","drawerWidth","drawerHeader","alignItems","padding","spacing","mixins","toolbar","justifyContent","textAlign","title","fontSize","margin","drawer","width","flexShrink","drawerPaper","list","loader","getHousingList","companyId","housingLoaded","dataArr","result","streetName","building","flat","addressId","houseId","streetId","id","name","parent","Array","from","Set","map","JSON","stringify","parse","LTT","key_id","key_parent","GetTree","getTreeFormat","housingError","CompanyList","props","useSelector","useDispatch","classes","useEffect","loadHousing","handleDrawerClose","Drawer","className","variant","anchor","open","paper","IconButton","onClick","Divider","List","component","length","item","ListItem","button","ListItemText","primary","CircularProgress","color","content","flexGrow","transition","transitions","create","easing","sharp","duration","leavingScreen","marginLeft","breakpoints","down","contentShift","easeOut","enteringScreen","contentWrapper","flexWrap","height","tree","paddingRight","maxWidth","overflow","marginBottom","minWidth","borderLeft","paddingLeft","borderTop","info","borderBottom","clientsList","position","listItem","key","marginRight","itemDelete","right","top","cursor","form","btn","marginTop","Handlers","setSameBlockHeight","block","runByEvent","elements","items","call","e","children","maxHeight","i","removeAttribute","Math","max","offsetHeight","style","callback","events","window","addEventListener","clientRequest","clientError","addClientToHousing","clientData","successCallback","deleteClientFromHousing","bindId","ClientList","ref","useRef","useState","setName","phone","setPhone","email","setEmail","addressInfo","useMemo","filter","current","noValidate","autoComplete","TextField","required","label","value","onChange","target","Button","Grid","container","client","xs","sm","md","lg","xl","Paper","HousingTreeList","clsx","Backdrop","backdrop","TreeView","defaultExpanded","defaultCollapseIcon","defaultExpandIcon","renderTree","elem","child","TreeItem","nodeId","appBar","background","appBarShift","menuButton","hide","NavTop","companyName","curElement","AppBar","Toolbar","edge","Typography","noWrap","App","CompanyPanel","ReactDOM","render","CssBaseline","document","getElementById"],"mappings":"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","file":"static/js/main.cb082a0f.chunk.js","sourcesContent":["export const COMPANIES_REQUEST = \"companies/COMPANIES_REQUEST\";\r\nexport const COMPANIES_SUCCESS = \"companies/COMPANIES_SUCCESS\";\r\nexport const COMPANIES_FAILURE = \"companies/COMPANIES_FAILURE\";\r\n\r\nexport const HOUSING_REQUEST = 'housing/HOUSING_REQUEST';\r\nexport const HOUSING_SUCCESS = \"housing/HOUSING_SUCCESS\";\r\nexport const HOUSING_FAILURE = \"housing/HOUSING_FAILURE\";\r\n\r\nexport const CLIENT_ADD = 'clients/CLIENT_ADD';\r\nexport const CLIENT_DELETE = 'clients/CLIENT_DELETE';\r\nexport const CLIENT_REQUEST = 'clients/CLIENT_REQUEST';\r\nexport const CLIENT_FAILURE = 'clients/CLIENT_FAILURE';\r\n\r\nexport const OPTION_MENU_OPEN = 'options/OPTION_MENU_OPEN';\r\nexport const OPTION_SET_COMPANY = 'options/OPTION_SET_COMPANY';\r\nexport const OPTION_CLIENT_PANEL = 'options/OPTION_CLIENT_PANEL';\r\nexport const OPTION_SET_FLAT = 'options/OPTION_SET_FLAT';","import {HOUSING_REQUEST, HOUSING_SUCCESS, HOUSING_FAILURE} from \"../types\";\r\n\r\nconst initialState = {\r\n    data: [],\r\n    dataOriginal:[],\r\n    loading: false,\r\n    error: null,\r\n};\r\n\r\nexport default function (state = initialState, action) {\r\n    const {type, payload} = action;\r\n\r\n    switch (type) {\r\n        case HOUSING_REQUEST:\r\n            return {\r\n                ...state,\r\n                data: [],\r\n                dataOriginal: [],\r\n                loading: true,\r\n                error: null\r\n            };\r\n        case HOUSING_SUCCESS:\r\n            return {\r\n                ...state,\r\n                data: payload.data,\r\n                dataOriginal: payload.dataOriginal,\r\n                loading: false,\r\n                error: null\r\n            };\r\n        case HOUSING_FAILURE:\r\n            return {\r\n                ...state,\r\n                data: [],\r\n                dataOriginal:[],\r\n                loading: false,\r\n                error: payload\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};","import {COMPANIES_REQUEST, COMPANIES_SUCCESS, COMPANIES_FAILURE} from \"../types\";\r\n\r\nconst initialState = {\r\n    data: [],\r\n    loading: true,\r\n    error: null\r\n};\r\n\r\nexport default function (state = initialState, action) {\r\n    const {type, payload} = action;\r\n\r\n    switch (type) {\r\n        case COMPANIES_REQUEST:\r\n            return {\r\n                ...state,\r\n                data: [],\r\n                loading: true,\r\n                error: null\r\n            };\r\n        case COMPANIES_SUCCESS:\r\n            return {\r\n                ...state,\r\n                data: payload,\r\n                loading: false,\r\n                error: null\r\n            };\r\n        case COMPANIES_FAILURE:\r\n            return {\r\n                ...state,\r\n                data: [],\r\n                loading: false,\r\n                error: payload,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};","import {CLIENT_ADD, CLIENT_DELETE, CLIENT_REQUEST, CLIENT_FAILURE} from \"../types\";\r\n\r\nconst initialState = {\r\n    loading: true,\r\n    error: null\r\n};\r\n\r\nexport default function (state = initialState, action) {\r\n    const {type, payload} = action;\r\n\r\n    switch (type) {\r\n        case CLIENT_ADD:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                error: null\r\n            };\r\n        case CLIENT_DELETE:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                error: null\r\n            };\r\n        case CLIENT_REQUEST:\r\n            return {\r\n                ...state,\r\n                loading: true,\r\n                error: null\r\n            };\r\n        case CLIENT_FAILURE:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                error: payload\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};","import {OPTION_CLIENT_PANEL, OPTION_MENU_OPEN, OPTION_SET_COMPANY, OPTION_SET_FLAT} from \"../types\";\r\n\r\nconst initialState = {\r\n    menuOpen: true,\r\n    curCompany: null,\r\n    curFlat: null,\r\n    clientPanel: false\r\n};\r\n\r\nexport default function (state = initialState, action) {\r\n    const {type, payload} = action;\r\n\r\n    switch (type) {\r\n        case OPTION_MENU_OPEN:\r\n            return {\r\n                ...state,\r\n                menuOpen:payload,\r\n            };\r\n        case OPTION_SET_COMPANY:\r\n            return {\r\n                ...state,\r\n                curCompany:payload,\r\n            };\r\n        case OPTION_CLIENT_PANEL:\r\n            return {\r\n                ...state,\r\n                clientPanel:payload,\r\n            };\r\n        case OPTION_SET_FLAT:\r\n            return {\r\n                ...state,\r\n                curFlat:payload,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};","import {combineReducers} from \"redux\";\r\nimport housing from \"./reducers/housing\";\r\nimport companies from \"./reducers/companies\";\r\nimport clients from \"./reducers/clients\";\r\nimport options from \"./reducers/options\";\r\n\r\nexport default combineReducers({\r\n    housing,\r\n    companies,\r\n    clients,\r\n    options\r\n});","import {applyMiddleware, createStore} from 'redux';\r\nimport reducer from \"./reduser\";\r\nimport thunk from \"redux-thunk\";\r\n\r\nconst store = createStore(reducer, applyMiddleware(thunk));\r\n\r\nexport default store;","import axios from 'axios';\r\n\r\nconst config = {\r\n    baseUrl: process.env.REACT_APP_DB_URL\r\n}\r\n\r\nexport default {\r\n    get: async (extraUrl, callbackSuccess, callbackError) => {\r\n        return axios\r\n            .get(config.baseUrl + extraUrl)\r\n            .then(response => {\r\n                if (response && response.status === 200) {\r\n                    callbackSuccess(response)\r\n                }\r\n            })\r\n            .catch(err => {\r\n                callbackError(err)\r\n            })\r\n    },\r\n    post: async (extraUrl, payload, callbackSuccess, callbackError) => {\r\n        return axios\r\n            .post(config.baseUrl + extraUrl, payload)\r\n            .then(response => {\r\n                if (response && response.status === 200) {\r\n                    callbackSuccess(response)\r\n                }\r\n            })\r\n            .catch(err => {\r\n                callbackError(err)\r\n            })\r\n    },\r\n    put: async (extraUrl, payload, callbackSuccess, callbackError) => {\r\n        return axios\r\n            .put(config.baseUrl + extraUrl, payload)\r\n            .then(response => {\r\n                if (response && response.status === 200) {\r\n                    callbackSuccess(response)\r\n                }\r\n            })\r\n            .catch(err => {\r\n                callbackError(err)\r\n            })\r\n    },\r\n    del: async (extraUrl, callbackSuccess, callbackError) => {\r\n        return axios\r\n            .delete(config.baseUrl + extraUrl)\r\n            .then(response => {\r\n                if (response && response.status === 200) {\r\n                    callbackSuccess(response)\r\n                }\r\n            })\r\n            .catch(err => {\r\n                callbackError(err)\r\n            })\r\n    }\r\n}","import {COMPANIES_REQUEST,COMPANIES_SUCCESS,COMPANIES_FAILURE} from \"../types\";\r\nimport Service from \"../../utils/service\";\r\n\r\n\r\nexport const companiesRequest = () => {\r\n    return {\r\n        type: COMPANIES_REQUEST\r\n    }\r\n};\r\nexport const companiesLoaded = (data) => {\r\n    return {\r\n        type: COMPANIES_SUCCESS,\r\n        payload: data\r\n    }\r\n};\r\nexport const companiesError = (error) => {\r\n    return {\r\n        type: COMPANIES_FAILURE,\r\n        payload: error\r\n    }\r\n};\r\n\r\n\r\nexport const getCompaniesList = () => (dispatch) => {\r\n    dispatch(companiesRequest());\r\n    Service.get('Request/companies',\r\n        ({data})=>{\r\n            dispatch(companiesLoaded(data))\r\n        },\r\n        error => {\r\n            dispatch(companiesError(error))\r\n        }\r\n    )\r\n}","import {OPTION_CLIENT_PANEL, OPTION_MENU_OPEN, OPTION_SET_COMPANY, OPTION_SET_FLAT} from \"../types\";\r\n\r\nexport const menu = (payload) => {\r\n    return {\r\n        type: OPTION_MENU_OPEN,\r\n        payload: payload\r\n    }\r\n};\r\nexport const setCurCompany = (payload) => {\r\n    return {\r\n        type: OPTION_SET_COMPANY,\r\n        payload: payload\r\n    }\r\n};\r\nexport const clientPanelShow = (payload) => {\r\n    return {\r\n        type: OPTION_CLIENT_PANEL,\r\n        payload: payload\r\n    }\r\n}\r\nexport const setCurFlat = (payload) => {\r\n    return {\r\n        type: OPTION_SET_FLAT,\r\n        payload: payload\r\n    }\r\n};","import {makeStyles} from \"@material-ui/core\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display:\"flex\",\r\n        minHeight:\"100vh\"\r\n    }\r\n}));\r\n\r\nexport const drawerWidth = 320;","import {makeStyles} from \"@material-ui/core/styles\";\r\nimport {drawerWidth} from \"../App/style\";\r\n\r\nexport const drawerHeader = makeStyles((theme) => ({\r\n    root:{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        padding: theme.spacing(0, 1),\r\n        // necessary for content to be below app bar\r\n        ...theme.mixins.toolbar,\r\n        justifyContent: \"space-between\",\r\n        textAlign:\"center\"\r\n    }\r\n}))\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n    title: {\r\n        fontSize: \"1.5rem\",\r\n        margin: 0,\r\n        padding: theme.spacing(0, 1),\r\n    },\r\n    drawer: {\r\n        width: drawerWidth,\r\n        flexShrink: 0,\r\n    },\r\n    drawerPaper: {\r\n        width: drawerWidth,\r\n    },\r\n    list:{\r\n        textAlign:\"center\"\r\n    },\r\n    loader:{\r\n        margin:theme.spacing(3)\r\n    }\r\n}))","import {HOUSING_REQUEST, HOUSING_SUCCESS, HOUSING_FAILURE} from \"../types\";\r\nimport Service from \"../../utils/service\";\r\nimport LTT from \"list-to-tree\";\r\n\r\n\r\nexport const housingRequest = () => {\r\n    return {\r\n        type: HOUSING_REQUEST\r\n    }\r\n};\r\nexport const housingLoaded = (data,dataOriginal) => {\r\n    return {\r\n        type: HOUSING_SUCCESS,\r\n        payload: {data,dataOriginal}\r\n    }\r\n};\r\nexport const housingError = (error) => {\r\n    return {\r\n        type: HOUSING_FAILURE,\r\n        payload: error\r\n    }\r\n}\r\n\r\n\r\nconst getTreeFormat = (dataArr) => {\r\n    let result = [];\r\n    for (let {streetName, building, flat, clients, addressId, houseId, streetId} of dataArr) {\r\n        result = [...result,\r\n            {\r\n                id:streetId,\r\n                name:`Улица ${streetName}`,\r\n                parent:0\r\n            },\r\n            {\r\n                id:houseId,\r\n                name:`Дом ${building}`,\r\n                parent:streetId\r\n            },\r\n            {\r\n                name:`Квартира ${flat}`,\r\n                parent:houseId,\r\n                addressId,\r\n                clients,\r\n            }\r\n        ]\r\n    }\r\n    result = Array.from(new Set(result.map(JSON.stringify))).map(JSON.parse);\r\n    result = new LTT(result, {\r\n        key_id: 'id',\r\n        key_parent: 'parent'\r\n    });\r\n    result = result.GetTree();\r\n    return result;\r\n}\r\n\r\nexport const getHousingList = (companyId) => (dispatch) => {\r\n    dispatch(housingRequest());\r\n    Service.get(`HousingStock?companyId=${companyId}`,\r\n        ({data}) => {\r\n            dispatch(housingLoaded(getTreeFormat(data),data))\r\n        },\r\n        error => {\r\n            dispatch(housingError(error))\r\n        }\r\n    )\r\n}","import React, {useEffect} from 'react';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {getCompaniesList} from \"../../redux/actions/companies\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport {menu, setCurCompany} from \"../../redux/actions/options\";\r\nimport {drawerHeader, useStyles} from \"./style\";\r\nimport {getHousingList} from \"../../redux/actions/housing\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\n\r\nconst CompanyList = (props) => {\r\n    const {companies: {data}, options: {menuOpen, curCompany}} = useSelector(state => state);\r\n    const dispatch = useDispatch();\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        dispatch(getCompaniesList());\r\n    }, []);\r\n\r\n    const loadHousing = (id) => {\r\n        handleDrawerClose();\r\n        if(curCompany !== id){\r\n            dispatch(getHousingList(id))\r\n            dispatch(setCurCompany(id))\r\n        }\r\n    }\r\n\r\n    const handleDrawerClose = () => {\r\n        dispatch(menu(false));\r\n    };\r\n\r\n    return (\r\n        <Drawer\r\n            className={classes.drawer}\r\n            variant=\"persistent\"\r\n            anchor=\"left\"\r\n            open={menuOpen}\r\n            classes={{\r\n                paper: classes.drawerPaper,\r\n            }}\r\n        >\r\n            <div className={drawerHeader().root}>\r\n                <h1 className={classes.title}>Список УК</h1>\r\n                <IconButton onClick={handleDrawerClose}>\r\n                    <ChevronLeftIcon/>\r\n                </IconButton>\r\n            </div>\r\n            <Divider/>\r\n            <List component=\"nav\" className={`${classes.list}`}  aria-label=\"mailbox folders\">\r\n                {\r\n                    data && data.length\r\n                        ?\r\n                        data.map(item => (\r\n                            <ListItem button key={item.id} onClick={()=>loadHousing(item.id)}>\r\n                                <ListItemText primary={item.name}/>\r\n                            </ListItem>\r\n                        ))\r\n                        :\r\n                    <CircularProgress className={`${classes.loader}`} color=\"inherit\"/>\r\n                }\r\n            </List>\r\n        </Drawer>\r\n    )\r\n}\r\n\r\nexport default CompanyList;","import {makeStyles} from \"@material-ui/core\";\r\nimport {drawerWidth} from \"../App/style\";\r\n\r\nexport const treeWidth = 400;\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n    content: {\r\n        flexGrow: 1,\r\n        padding: theme.spacing(3),\r\n        transition: theme.transitions.create('margin', {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen,\r\n        }),\r\n        marginLeft: -drawerWidth,\r\n        [theme.breakpoints.down('sm')]: {\r\n            padding: theme.spacing(2),\r\n        },\r\n    },\r\n    contentShift: {\r\n        transition: theme.transitions.create('margin', {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n        marginLeft: 0,\r\n    },\r\n    contentWrapper:{\r\n        display:\"flex\",\r\n        justifyContent: \"space-between\",\r\n        flexWrap:\"wrap\",\r\n        [theme.breakpoints.down('sm')]: {\r\n            height:\"100vh\"\r\n        },\r\n    },\r\n    tree:{\r\n        flexGrow: 1,\r\n        flexShrink:0,\r\n        paddingRight:\"16px !important\",\r\n        maxWidth: treeWidth,\r\n            [theme.breakpoints.down('sm')]: {\r\n                height:\"30%\",\r\n                overflow: \"auto\",\r\n                maxWidth:\"100%\",\r\n                marginBottom: \"20px\"\r\n            },\r\n    }\r\n}));","import {makeStyles} from \"@material-ui/core/styles\";\r\nimport {treeWidth} from \"../HousingTreeList/style\";\r\n\r\nconst baskSize = 40;\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        maxWidth:`calc(100% - ${treeWidth}px)`,\r\n        minWidth:\"280px\",\r\n        minHeight: \"calc(100vh - 88px*2)\",\r\n        borderLeft:\"1px solid lightgrey\",\r\n        paddingLeft:\"16px\",\r\n        flexGrow:1,\r\n        [theme.breakpoints.down('sm')]: {\r\n            maxWidth:\"100%\",\r\n            borderLeft:0,\r\n            borderTop:\"1px solid lightgrey\",\r\n            paddingLeft:0\r\n        },\r\n    },\r\n    info:{\r\n        width:\"100%\",\r\n        padding:theme.spacing(2, 0),\r\n        borderBottom:\"1px solid lightgrey\"\r\n    },\r\n    title:{\r\n        margin:0\r\n    },\r\n    clientsList:{\r\n        padding:theme.spacing(2, 0),\r\n    },\r\n    paper:{\r\n        position:\"relative\",\r\n        padding:theme.spacing(1),\r\n        paddingRight:baskSize\r\n    },\r\n    listItem:{\r\n        position:\"relative\",\r\n        padding:theme.spacing(0, 1),\r\n    },\r\n    key:{\r\n        flexGrow:0,\r\n        marginRight:10,\r\n        '& span':{\r\n            fontSize:\"0.9rem\",\r\n            color:\"grey\"\r\n        }\r\n    },\r\n    itemDelete:{\r\n        position: \"absolute\",\r\n        right:0,\r\n        top:0,\r\n        width:baskSize,\r\n        height:baskSize,\r\n        cursor:\"pointer\",\r\n        display:\"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        '& *':{\r\n            color:\"grey\",\r\n            cursor:\"pointer\",\r\n            fontSize:\"2rem\"\r\n        }\r\n    },\r\n    form:{\r\n        display:\"flex\",\r\n        justifyContent:\"space-between\",\r\n        alignItems:\"center\",\r\n        borderBottom:0,\r\n        flexWrap:\"wrap\",\r\n        '& *':{\r\n            margin:5,\r\n            flexGrow:1,\r\n            maxWidth:320,\r\n            [theme.breakpoints.down('sm')]: {\r\n                margin:0,\r\n                marginRight: 5\r\n            },\r\n        }\r\n    },\r\n    btn:{\r\n        maxWidth: \"initial\",\r\n            [theme.breakpoints.down('sm')]: {\r\n                marginTop:15\r\n            },\r\n    }\r\n}));","const Handlers = {\r\n    setSameBlockHeight: (block) => {\r\n        Handlers.runByEvent(() => {\r\n            const getElements = (items) => {\r\n                return [].map.call(items, ((e) => {\r\n                    return e.children[0]\r\n                }))\r\n            }\r\n\r\n            let elements;\r\n            elements = getElements(block)\r\n\r\n            let maxHeight = 0;\r\n            for (let i = 0; i < elements.length; ++i) {\r\n                elements[i].removeAttribute(\"style\")\r\n                maxHeight = Math.max(maxHeight, elements[i].offsetHeight);\r\n            }\r\n            for (let i = 0; i < elements.length; ++i) {\r\n                elements[i].style.height = maxHeight + \"px\";\r\n            }\r\n\r\n        }, ['resize'])\r\n    },\r\n    runByEvent: (callback, events) => {\r\n        (callback)();\r\n        events.map(e => {\r\n            window.addEventListener(e, () => {\r\n                callback();\r\n            })\r\n        })\r\n    },\r\n}\r\nexport default Handlers;","import {CLIENT_ADD, CLIENT_DELETE, CLIENT_REQUEST, CLIENT_FAILURE} from \"../types\";\r\nimport Service from \"../../utils/service\";\r\n\r\nexport const clientAdd = () => {\r\n    return {\r\n        type: CLIENT_ADD\r\n    }\r\n};\r\nexport const clientDelete = () => {\r\n    return {\r\n        type: CLIENT_DELETE\r\n    }\r\n};\r\nexport const clientRequest = () => {\r\n    return {\r\n        type: CLIENT_REQUEST\r\n    }\r\n};\r\nexport const clientError = (error) => {\r\n    return {\r\n        type: CLIENT_FAILURE,\r\n        payload: error\r\n    }\r\n};\r\n\r\nexport const addClientToHousing = (clientData, addressId, successCallback) => (dispatch) => {\r\n    dispatch(clientRequest());\r\n    Service.post(\r\n        'HousingStock/client', clientData,\r\n        response => {\r\n            Service.put(\r\n                \"HousingStock/bind_client\",\r\n                {\r\n                    \"AddressId\": addressId,\r\n                    \"ClientId\": response.data.id\r\n                },\r\n                response => {\r\n                    dispatch(clientAdd());\r\n                    successCallback();\r\n                },\r\n                error => {\r\n                    dispatch(clientError(error))\r\n                }\r\n            )\r\n        },\r\n        error => {\r\n            dispatch(clientError(error))\r\n        }\r\n    )\r\n}\r\n\r\nexport const deleteClientFromHousing = (bindId,successCallback) => (dispatch) => {\r\n    dispatch(clientRequest());\r\n    Service.del(\r\n        `HousingStock/bind_client/${bindId}`,\r\n        response => {\r\n            dispatch(clientDelete())\r\n            successCallback()\r\n        },\r\n        error => {\r\n            dispatch(clientError(error))\r\n        }\r\n    )\r\n}","import React, {useEffect, useMemo, useRef, useState} from 'react';\r\nimport {useStyles} from \"./style\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport DeleteOutlinedIcon from '@material-ui/icons/DeleteOutlined';\r\nimport Handlers from \"../../utils/handlers\";\r\nimport {addClientToHousing, deleteClientFromHousing} from \"../../redux/actions/clients\";\r\nimport {getHousingList} from \"../../redux/actions/housing\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nconst ClientList = (props) => {\r\n    const {housing: {dataOriginal}, options:{curFlat,curCompany}} = useSelector(state => state);\r\n    const ref = useRef(null);\r\n    const classes = useStyles();\r\n    const dispatch = useDispatch();\r\n\r\n    const [name, setName] = useState(\"\");\r\n    const [phone, setPhone] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n\r\n    const addClient = (addressId) => {\r\n        if(name && phone && email){\r\n            const data = {\r\n                name,\r\n                phone,\r\n                email\r\n            }\r\n            dispatch(addClientToHousing(\r\n                data,\r\n                addressId,\r\n                ()=>dispatch(getHousingList(curCompany))\r\n                )\r\n            )\r\n            setName(\"\")\r\n            setPhone(\"\")\r\n            setEmail(\"\")\r\n        }\r\n    }\r\n\r\n    const addressInfo = useMemo(()=>{\r\n        if(curFlat && dataOriginal.length){\r\n            return dataOriginal.filter(e=>curFlat===e.addressId)[0]\r\n        }\r\n        else{\r\n            return null;\r\n        }\r\n    },[curCompany,curFlat,dataOriginal])\r\n\r\n    const itemDelete = (bindId) => {\r\n        dispatch(deleteClientFromHousing(bindId,\r\n            ()=>dispatch(getHousingList(curCompany)))\r\n        )\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(ref.current){\r\n            Handlers.setSameBlockHeight(ref.current.children);\r\n        }\r\n    }, [addressInfo]);\r\n\r\n\r\n    if(!addressInfo){\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <div className={classes.info}>\r\n                <h3 className={classes.title}>\r\n                    {`ул. ${addressInfo.streetName} ${addressInfo.building}, кв. ${addressInfo.flat}`}\r\n                </h3>\r\n            </div>\r\n            <div>\r\n                <form className={`${classes.info} ${classes.form}`} noValidate autoComplete=\"off\">\r\n                    <TextField required id=\"name\" label=\"name\" value={name} onChange={e=>setName(e.target.value)}/>\r\n                    <TextField required id=\"phone\" label=\"phone\" value={phone} onChange={e=>setPhone(e.target.value)}/>\r\n                    <TextField required id=\"email\" label=\"email\" value={email} onChange={e=>setEmail(e.target.value)}/>\r\n                    <Button variant=\"outlined\" className={classes.btn} onClick={()=>addClient(addressInfo.addressId)}>\r\n                        Добавить жильца\r\n                    </Button>\r\n                </form>\r\n                <Grid ref={ref} className={classes.clientsList} container spacing={3}>\r\n                    {\r\n                        addressInfo.clients.map(client=>(\r\n                            <Grid item xs={12} sm={12} md={6} lg={4} xl={3} key={client.id}>\r\n                                <Paper className={classes.paper}>\r\n                                    <span className={classes.itemDelete} onClick={()=>itemDelete(client.bindId)}>\r\n                                        <DeleteOutlinedIcon />\r\n                                    </span>\r\n                                    <List>\r\n                                        <ListItem className={classes.listItem}>\r\n                                            <ListItemText primary=\"name:\" className={classes.key}/>\r\n                                            <ListItemText primary={client.name} className={classes.value}/>\r\n                                        </ListItem>\r\n                                        <ListItem className={classes.listItem}>\r\n                                            <ListItemText primary=\"phone:\" className={classes.key}/>\r\n                                            <ListItemText primary={client.phone} className={classes.value}/>\r\n                                        </ListItem>\r\n                                        <ListItem className={classes.listItem}>\r\n                                            <ListItemText primary=\"e-mail:\" className={classes.key}/>\r\n                                            <ListItemText primary={client.email} className={classes.value}/>\r\n                                        </ListItem>\r\n                                    </List>\r\n                                </Paper>\r\n                            </Grid>\r\n                        ))\r\n                    }\r\n                </Grid>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ClientList;","import React from 'react';\r\nimport clsx from \"clsx\";\r\nimport './style.js';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {useStyles} from \"./style\";\r\nimport {drawerHeader} from \"../CompanyPanel/style\";\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport TreeView from '@material-ui/lab/TreeView';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport TreeItem from '@material-ui/lab/TreeItem';\r\nimport ClientList from \"../ClientsList\";\r\nimport {setCurFlat} from \"../../redux/actions/options\";\r\n\r\nconst HousingTreeList = (props) => {\r\n    const {options: {menuOpen}, housing: {data, loading}} = useSelector((state) => state);\r\n    const dispatch = useDispatch();\r\n    const classes = useStyles();\r\n\r\n    const renderTree = tree => {\r\n        return tree.map(elem => {\r\n            if (!elem.child) {\r\n                return (\r\n                    <TreeItem\r\n                        nodeId={elem.name + elem.id + '_' + elem.parent}\r\n                        label={elem.name}\r\n                        key={elem.name + elem.id + '_' + elem.parent}\r\n                        onClick={()=>dispatch(setCurFlat(elem.addressId))}\r\n                    />\r\n                );\r\n            } else {\r\n                return (\r\n                    <TreeItem\r\n                        nodeId={elem.name + elem.id + '_' + elem.parent}\r\n                        label={elem.name}\r\n                        key={elem.name + elem.id + '_' + elem.parent}\r\n                    >\r\n                        {renderTree(elem.child)}\r\n                    </TreeItem>\r\n                );\r\n            }\r\n        });\r\n    };\r\n\r\n    return (\r\n        <main\r\n            className={clsx(classes.content, {\r\n                [classes.contentShift]: menuOpen,\r\n            })}\r\n        >\r\n            <div className={drawerHeader().root}/>\r\n\r\n            <Backdrop\r\n                className={classes.backdrop}\r\n                open={loading}\r\n            >\r\n                <CircularProgress color=\"inherit\"/>\r\n            </Backdrop>\r\n            <div className={classes.contentWrapper}>\r\n                <TreeView\r\n                    className={classes.tree}\r\n                    defaultExpanded={['0']}\r\n                    defaultCollapseIcon={<ExpandMoreIcon/>}\r\n                    defaultExpandIcon={<ChevronRightIcon/>}\r\n                >\r\n                    {\r\n                        data && data.length>0\r\n                        &&\r\n                        renderTree(data)\r\n                    }\r\n                </TreeView>\r\n                <ClientList/>\r\n            </div>\r\n        </main>\r\n    )\r\n}\r\n\r\nexport default HousingTreeList;","import {makeStyles} from \"@material-ui/core/styles\";\r\nimport {drawerWidth} from \"../App/style\";\r\n\r\nexport const useStyles = makeStyles((theme) => ({\r\n    appBar: {\r\n        background:\"#343a40\",\r\n        transition: theme.transitions.create(['margin', 'width'], {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen,\r\n        }),\r\n    },\r\n    appBarShift: {\r\n        width: `calc(100% - ${drawerWidth}px)`,\r\n        marginLeft: drawerWidth,\r\n        transition: theme.transitions.create(['margin', 'width'], {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    hide: {\r\n        display: 'none',\r\n    }\r\n}));\r\n","import React, {useMemo} from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport clsx from \"clsx\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {menu} from \"../../redux/actions/options\";\r\nimport {useStyles} from \"./style\";\r\n\r\n\r\nconst NavTop = (props) => {\r\n    const dispatch = useDispatch();\r\n    const {options: {menuOpen, curCompany}, companies: {data}} = useSelector(state => state);\r\n    const classes = useStyles();\r\n\r\n    const handleDrawerOpen = () => {\r\n        dispatch(menu(true));\r\n    };\r\n\r\n    const companyName = useMemo(() => {\r\n        let curElement = data.filter(e => e.id === curCompany)\r\n        curElement = curElement[0];\r\n\r\n        if (curElement) {\r\n            return curElement.name\r\n        } else return \"React App\"\r\n\r\n    }, [curCompany])\r\n\r\n    return (\r\n        <AppBar\r\n            position=\"fixed\"\r\n            className={clsx(classes.appBar, {\r\n                [classes.appBarShift]: menuOpen,\r\n            })}\r\n        >\r\n            <Toolbar>\r\n                <IconButton\r\n                    color=\"inherit\"\r\n                    aria-label=\"open drawer\"\r\n                    onClick={handleDrawerOpen}\r\n                    edge=\"start\"\r\n                    className={clsx(classes.menuButton, menuOpen && classes.hide)}\r\n                >\r\n                    <MenuIcon/>\r\n                </IconButton>\r\n                <Typography variant=\"h6\" noWrap>\r\n                    {companyName}\r\n                </Typography>\r\n            </Toolbar>\r\n        </AppBar>\r\n    )\r\n}\r\n\r\nexport default NavTop;","import React from 'react';\r\nimport CompanyPanel from \"../CompanyPanel\";\r\nimport HousingTreeList from \"../HousingTreeList\";\r\nimport NavTop from \"../NavTop\";\r\nimport {useStyles} from \"./style\";\r\n\r\n\r\n\r\nconst App = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <NavTop/>\r\n            <CompanyPanel/>\r\n            <HousingTreeList/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport store from \"./redux/store\";\nimport {Provider} from 'react-redux';\nimport App from './components/App';\nimport './style';\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\n\n\nReactDOM.render(\n    <Provider store={store}>\n        <CssBaseline />\n        <App/>\n    </Provider>, document.getElementById('root'));"],"sourceRoot":""}